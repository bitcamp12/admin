<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>사이트 관리자</title>

<!-- CSS 라이브러리 -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" th:href="@{/static/css/index.css}">
</head>
<body>

	<!-- 헤더 섹션 -->
	<header>
		<div class="flex justify-between items-center px-6 py-4">

			<!--  햄버거 메뉴와 타이틀 -->
			<div class="flex items-center space-x-4">
				<button id="sidebarToggle"
					class="p-2 hover:bg-purple-50 rounded-lg transition-colors">
					<i class="fas fa-bars text-gray-600"></i>
				</button>
				<h2 class="text-xl font-semibold text-gray-800">사이트 관리자</h2>
			</div>
			<div class="flex items-center">
				<span class="mr-3 text-gray-600">사이트 관리자 님</span> <img
					src="/static/images/default-profile.png" alt="Profile"
					class="w-10 h-10 rounded-full border-2 border-purple-100">
			</div>
		</div>
	</header>


	<!-- 메인 레이아웃 -->
	<div class="flex min-h-screen">
		<!-- 사이드바 -->
		<nav id="sidebar" class="nav-transition w-64">
			<div class="pt-4">
				<ul class="space-y-2">
					<!-- 네비게이션 아이템들 -->
					<span id="memberList" class="nav-item">
						<div class="nav-icon">
							<i class="fas fa-users"></i>
						</div> <span class="menu-text ml-3 font-medium">회원 관리</span>
					</span>
					</li>
					<li><span id="sellerList" class="nav-item">
							<div class="nav-icon">
								<i class="fas fa-users-cog"></i>
							</div> <span class="menu-text ml-3 font-medium">공연 관계자 관리</span>
					</span></li>
					<li><span id="noticeList" class="nav-item">
							<div class="nav-icon">
								<i class="fas fa-clipboard-list"></i>
							</div> <span class="menu-text ml-3 font-medium">공지사항 목록</span>
					</span></li>
					<li><span id="reviewList" class="nav-item">
							<div class="nav-icon">
								<i class="fas fa-list-alt"></i>
							</div> <span class="menu-text ml-3 font-medium">리뷰 관리</span>
					</span></li>
					<li><span id="chatting" class="nav-item">
							<div class="nav-icon">
								<i class="fab fa-rocketchat"></i>
							</div> <span class="menu-text ml-3 font-medium">문의 채팅 목록</span>
					</span></li>
					<li><span id="analysis" class="nav-item">
							<div class="nav-icon">
								<i class="fas fa-chart-line"></i>
							</div> <span class="menu-text ml-3 font-medium">이용자 분석</span>
					</span></li>
					<li><span id="noticeUpdateForm" class="nav-item">
							<div class="nav-icon">
								<i class="fas fa-chart-line"></i>
							</div> <span class="menu-text ml-3 font-medium">테스트</span>
					</span></li>
				</ul>
			</div>
		</nav>

		<!-- 메인 컨텐츠 : 추후 변경 -->
		<main class="flex-1 p-6 bg-purple-50">
			<div id="mainContent" class="main-content"></div>
		</main>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
document.addEventListener('DOMContentLoaded', function(){
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    let isMenuHidden = false;
    
    // 사이드바 토글 기능(플래그로 상태변경)
    sidebarToggle.addEventListener('click', function(){
        isMenuHidden = !isMenuHidden;
        sidebar.classList.toggle('nav-hidden');
    });
    
    // 첫 화면 보여줄 내용
    const mainContent = document.getElementById('mainContent');
	//mainContent.innerHTML = html;
	 fetch('/secure/admin/memberList')  // 서버에서 해당 HTML 파일을 요청
     .then(response => response.text())
     .then(html => {
         document.getElementById('mainContent').innerHTML = html;
     });
	 
	 //클릭 이벤트 설정
	 loadClickEvent('memberList');
	 loadClickEvent('sellerList');
	 loadClickEvent('noticeList');
	 loadClickEvent('reviewList');
	 loadClickEvent('chatting');
	 loadClickEvent('analysis');
	 loadClickEvent('noticeUpdateForm');
});

//타임리프 body 불러오기
function loadClickEvent(elementId, url) {
    document.getElementById(elementId).addEventListener('click', function() {
        const mainContent = document.getElementById('mainContent');
        fetch('/secure/admin/'+elementId) // Fetch the content from the server
            .then(response => response.text())
            .then(html => {
                mainContent.innerHTML = html; // Update the main content
            });
    });
}

function loadBodyForm(elementId) {
     const mainContent = document.getElementById('mainContent');
     fetch('/secure/admin/'+elementId) // Fetch the content from the server
         .then(response => response.text())
         .then(html => {
             mainContent.innerHTML = html; // Update the main content
         });
}
// 공지 사항 이미지 미리보기 함수
function noticePreviewImage(event) {
	const input = event.target;
	const preview = document.getElementById('imagePreview');

	if (input.files && input.files[0]) {
		const reader = new FileReader();

		reader.onload = function(e) {
			preview.src = e.target.result;
			preview.style.display = 'block'; // 미리보기 이미지 보이게 설정
		};

		reader.readAsDataURL(input.files[0]);
	}
}

// 미리보기 초기화 함수
function noticeClearPreview() {
	const preview = document.getElementById('imagePreview');
	const imageInput = document.getElementById('image');
	preview.src = '';
	preview.style.display = 'none';
	imageInput.value = '';
}	
</script>
</body>
</html>
